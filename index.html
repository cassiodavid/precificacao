<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Precificação e Valor Hora</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Estilos para os Sliders */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: currentColor; cursor: pointer; margin-top: -6px; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #e5e7eb; border-radius: 2px; }
        
        .slider-blue::-webkit-slider-thumb { color: #2563eb; }
        .slider-green::-webkit-slider-thumb { color: #059669; }
        .slider-purple::-webkit-slider-thumb { color: #7c3aed; }
        
        .transition-colors { transition-property: background-color, border-color, color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 300ms; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 p-4 md:p-8 min-h-screen">
    <div class="max-w-6xl mx-auto">
        
        <!-- Header -->
        <div class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-slate-900 flex items-center justify-center gap-2">
                <i data-lucide="calculator" class="text-blue-600"></i> Gestor de Precificação
            </h1>
            <p class="text-slate-500 mt-2">Calcule preços, descubra seu valor hora e planeje sua jornada.</p>
        </div>

        <!-- Tabs de Navegação -->
        <div class="bg-white p-1 rounded-xl shadow-sm border border-slate-200 flex flex-col sm:flex-row w-full mb-6 gap-1">
            <button id="tabProduct" onclick="switchTab('product')" class="flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all bg-blue-600 text-white shadow-md">
                <i data-lucide="package" width="20"></i> Produtos
            </button>
            <button id="tabService" onclick="switchTab('service')" class="flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all text-slate-600 hover:bg-slate-50">
                <i data-lucide="clock" width="20"></i> Serviços
            </button>
            <button id="tabHourly" onclick="switchTab('hourly')" class="flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all text-slate-600 hover:bg-slate-50">
                <i data-lucide="hourglass" width="20"></i> Valor Hora Mínimo
            </button>
            <button id="tabWorkload" onclick="switchTab('workload')" class="flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all text-slate-600 hover:bg-slate-50">
                <i data-lucide="target" width="20"></i> Jornada Necessaria!
            </button>
        </div>

        <!-- CONTAINER 1: CALCULADORA DE PREÇOS (PRODUTOS E SERVIÇOS) -->
        <div id="pricingTool" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            <!-- Input Section -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h2 id="inputTitle" class="text-xl font-semibold mb-6 flex items-center gap-2">Custos do Produto</h2>

                <!-- Inputs Produto -->
                <div id="productInputs" class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Custo de Aquisição/Produção (R$)</label>
                        <input type="number" id="prodCost" value="50.00" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        <p class="text-xs text-slate-500 mt-1">Quanto paga ao fornecedor ou custo de matéria-prima.</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Outros Custos Fixos (R$)</label>
                        <input type="number" id="prodExpenses" value="5.00" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        <p class="text-xs text-slate-500 mt-1">Etiqueta, Frete, Sacolinhas, Enfeites, mimos  etc etc.</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Impostos (%)</label>
                            <input type="number" id="prodTax" value="15" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                            <p class="text-xs text-slate-500 mt-1">Aqui é dificil saber mas precisa saber. Nota Fiscal + Taxas de Maquineta + ...</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Margem Lucro (%)</label>
                            <input type="number" id="prodProfit" value="25" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none border-emerald-200 bg-emerald-50">
                            <p class="text-xs text-slate-500 mt-1">Quanto de lucro tu queres para o produto?</p>
                        </div>
                    </div>
                </div>

                <!-- Inputs Serviço -->
                <div id="serviceInputs" class="space-y-5 hidden">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Valor Hora (R$)</label>
                            <input type="number" id="servRate" value="35.00" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                            <p class="text-xs text-slate-500 mt-1">Valor da Tua Hora Trabalhada.</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Horas Estimadas</label>
                            <input type="number" id="servHours" value="10" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                            <p class="text-xs text-slate-500 mt-1">Quantas Horas tu Pretende Trabalhar NESSE UNICO serviço.</p>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Despesas Extras (R$)</label>
                        <input type="number" id="servMaterials" value="0.00" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                        <p class="text-xs text-slate-500 mt-1">Dificil Saber Todas... Gasolina, Insumos, Uber, Impressões, Produtos necessarios etc. etc.</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Impostos (%)</label>
                            <input type="number" id="servTax" value="20" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                            <p class="text-xs text-slate-500 mt-1">Nota Fiscal + Taxas Maquinetas + ... etc etc</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Margem Lucro (%)</label>
                            <input type="number" id="servProfit" value="20" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none border-emerald-200 bg-emerald-50">
                            <p class="text-xs text-slate-500 mt-1">Quanto tu quer Lucrar pelo Serviço.</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-blue-50 p-4 rounded-lg flex items-start gap-3">
                    <i data-lucide="info" class="text-blue-600 flex-shrink-0 mt-0.5" width="18"></i>
                    <p class="text-sm text-blue-800">
                        Esta calculadora usa o <strong>Markup Divisor</strong>. Isso garante que a sua margem de lucro é sobre o preço final da venda, não apenas sobre o custo. É dificil compreender, sugiro pesquisar mais a fundo. :D
                    </p>
                </div>
            </div>

            <!-- Results Section -->
            <div class="bg-slate-900 text-white p-6 rounded-xl shadow-lg flex flex-col justify-between relative overflow-hidden">
                <div class="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-white opacity-5 rounded-full pointer-events-none"></div>

                <!-- Error State -->
                <div id="errorState" class="hidden h-full flex flex-col items-center justify-center text-center p-6">
                    <i data-lucide="alert-circle" class="text-red-400 mb-2" width="48"></i>
                    <h3 class="text-xl font-bold text-red-200">Erro no Cálculo</h3>
                    <p class="text-slate-400 mt-2">A soma de Impostos + Lucro não pode ser 100% ou mais.</p>
                </div>

                <!-- Success State -->
                <div id="successState">
                    <div>
                        <h3 class="text-slate-400 text-sm font-medium uppercase tracking-wider mb-1">Preço Sugerido de Venda</h3>
                        <div class="flex items-baseline gap-1">
                            <span class="text-2xl font-light text-emerald-400">R$</span>
                            <span id="finalPriceDisplay" class="text-5xl font-bold text-white tracking-tight">0,00</span>
                        </div>
                        
                        <div class="mt-8 space-y-4">
                            <h4 class="text-slate-300 text-sm font-medium flex items-center gap-2">
                                <i data-lucide="pie-chart" width="16"></i> Para onde vai o dinheiro?
                            </h4>
                            
                            <!-- Breakdown Item 1 (Custos) -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span id="labelCost" class="text-slate-400">Custos</span>
                                    <span id="valCost" class="font-medium">R$ 0,00</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div id="barCost" class="h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Breakdown Item 2 (Impostos) -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-slate-400">Impostos/Taxas</span>
                                    <span id="valTax" class="font-medium">R$ 0,00</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div id="barTax" class="h-2 rounded-full bg-yellow-500 transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Breakdown Item 3 (Lucro) -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-slate-400">Lucro Líquido</span>
                                    <span id="valProfit" class="font-medium">R$ 0,00</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div id="barProfit" class="h-2 rounded-full bg-emerald-500 transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 pt-6 border-t border-slate-700 grid grid-cols-2 gap-4">
                        <div class="bg-slate-800 p-4 rounded-lg">
                            <p class="text-xs text-slate-400">Lucro Líquido Real</p>
                            <p id="profitReal" class="text-xl font-bold text-emerald-400 mt-1">R$ 0,00</p>
                        </div>
                        <div class="bg-slate-800 p-4 rounded-lg">
                            <p class="text-xs text-slate-400">Custo Total</p>
                            <p id="costTotal" class="text-xl font-bold text-white mt-1">R$ 0,00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTAINER 2: CALCULADORA DE VALOR HORA (VALOR HORA MINIMO) -->
        <div id="hourlyTool" class="hidden w-full grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Coluna Esquerda: Inputs -->
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h2 class="text-xl font-bold flex items-center gap-2 mb-6 text-gray-900">
                        <i data-lucide="calculator" class="text-blue-600"></i> Seus Dados
                    </h2>

                    <!-- Bloco Financeiro -->
                    <div class="space-y-4 mb-8">
                        <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2">
                            <i data-lucide="wallet" width="16"></i> Financeiro Mensal
                        </h3>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1">Salário Líquido Desejado (R$)</label>
                            <input type="number" id="desiredSalary" value="2000" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold text-gray-700">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">Custos Fixos da Empresa (R$)</label>
                            <input type="number" id="fixedCosts" value="300" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">Impostos e Reservas (%)</label>
                            <input type="number" id="taxesAndBuffer" value="25" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <hr class="border-gray-100 my-6">

                    <!-- Bloco Tempo -->
                    <div class="space-y-4">
                        <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2">
                            <i data-lucide="clock" width="16"></i> Tempo e Produtividade
                        </h3>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Dias/Semana</label>
                                <select id="workDaysPerWeek" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg outline-none">
                                    <option value="1">1 dia</option>
                                    <option value="2">2 dias</option>
                                    <option value="3">3 dias</option>
                                    <option value="4">4 dias</option>
                                    <option value="5" selected>5 dias</option>
                                    <option value="6">6 dias</option>
                                    <option value="7">7 dias</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Horas/Dia</label>
                                <input type="number" id="hoursPerDay" value="8" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg outline-none">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">Férias por ano (Semanas)</label>
                            <input type="range" id="vacationWeeks" min="0" max="10" value="4" class="slider-blue w-full h-2 rounded-lg appearance-none cursor-pointer text-blue-600">
                            <div class="text-right text-xs text-gray-500 font-medium mt-1"><span id="displayVacation">4</span> semanas de descanso</div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1 flex justify-between">
                                <span>Produtividade Real (%)</span>
                                <span id="badgeProductivity" class="text-xs px-2 py-0.5 rounded bg-green-100 text-green-600">70% Faturável</span>
                            </label>
                            <input type="range" id="productivity" min="10" max="100" step="5" value="70" class="slider-blue w-full h-2 rounded-lg appearance-none cursor-pointer text-blue-600">
                            <p class="text-xs text-gray-400 mt-2 leading-relaxed">
                                <i data-lucide="alert-triangle" width="12" class="inline mr-1"></i>
                                <strong>Atenção:</strong> É impossível ser 100% produtivo. Considere tempo para responder emails e pausas. A média saudável é 60-75%.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coluna Direita: Resultados -->
            <div class="flex flex-col gap-6">
                
                <!-- Cartão Principal -->
                <div class="bg-slate-900 text-white p-8 rounded-2xl shadow-xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-blue-500 rounded-full filter blur-3xl opacity-20 -mr-10 -mt-10"></div>
                    <div class="absolute bottom-0 left-0 w-32 h-32 bg-purple-500 rounded-full filter blur-3xl opacity-20 -ml-10 -mb-10"></div>
                    
                    <h3 class="text-slate-400 font-medium text-sm uppercase tracking-wider mb-2">Seu Valor Hora Mínimo</h3>
                    <div class="flex items-baseline gap-1 mb-1">
                        <span class="text-4xl font-light text-blue-400">R$</span>
                        <span id="resultHourlyRate" class="text-7xl font-bold tracking-tighter">0</span>
                        <span id="resultHourlyDecimal" class="text-2xl text-slate-400">,00</span>
                    </div>
                    <p class="text-slate-400 text-sm mb-6">
                        Este é o valor mínimo para cobrir custos e salário, considerando impostos e tempo improdutivo.
                    </p>

                    <div class="grid grid-cols-2 gap-4 border-t border-slate-700 pt-6">
                        <div>
                            <p class="text-xs text-slate-400 mb-1">Faturação Mensal Necessária</p>
                            <p class="font-semibold text-lg text-green-400">R$ <span id="resultGrossRevenue">0</span></p>
                        </div>
                        <div>
                            <p class="text-xs text-slate-400 mb-1">Horas Faturáveis / Mês</p>
                            <p class="font-semibold text-lg text-blue-300"><span id="resultBillableHours">0</span>h</p>
                        </div>
                    </div>
                </div>

                <!-- Breakdown -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex-1">
                    <h3 class="font-bold text-gray-800 mb-6 flex items-center gap-2">
                        <i data-lucide="piggy-bank" class="text-purple-600"></i> Distribuição do Valor Hora
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Salário -->
                        <div class="relative pt-1">
                            <div class="flex mb-2 items-center justify-between">
                                <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200">Seu Salário Líquido</span>
                                <span id="percentSalary" class="text-xs font-semibold inline-block text-blue-600">0%</span>
                            </div>
                            <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-100">
                                <div id="barSalary" style="width: 0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500"></div>
                            </div>
                        </div>

                        <!-- Custos -->
                        <div class="relative pt-1">
                            <div class="flex mb-2 items-center justify-between">
                                <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-orange-600 bg-orange-200">Custos Fixos</span>
                                <span id="percentCosts" class="text-xs font-semibold inline-block text-orange-600">0%</span>
                            </div>
                            <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-orange-100">
                                <div id="barCosts" style="width: 0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-orange-500 transition-all duration-500"></div>
                            </div>
                        </div>

                        <!-- Impostos -->
                        <div class="relative pt-1">
                            <div class="flex mb-2 items-center justify-between">
                                <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-red-600 bg-red-200">Impostos e Reserva</span>
                                <span id="percentTax" class="text-xs font-semibold inline-block text-red-600">0%</span>
                            </div>
                            <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-red-100">
                                <div id="barTax" style="width: 0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-red-500 transition-all duration-500"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 bg-blue-50 p-4 rounded-xl border border-blue-100">
                        <h4 class="text-blue-800 font-bold text-sm mb-2 flex items-center gap-2">
                            <i data-lucide="briefcase" width="16"></i> Dica de Ouro
                        </h4>
                        <p class="text-sm text-blue-700 leading-relaxed">
                            Este valor é o seu "Piso". Para ter lucro real, tente vender a sua hora por <strong id="suggestedRate">R$0</strong>.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTAINER 3: METAS E REALIDADE (NOVO) -->
        <div id="workloadTool" class="hidden w-full grid grid-cols-1 lg:grid-cols-12 gap-8">
             
            <!-- Painel de Controle (Esquerda) -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h2 class="text-lg font-bold flex items-center gap-2 mb-6 text-gray-900">
                        <i data-lucide="target" class="text-blue-600"></i> Metas & Realidade
                    </h2>

                    <div class="space-y-5">
                        <!-- Bloco Financeiro -->
                        <div class="space-y-3">
                            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">O seu "Salário" + Custos</label>
                            
                            <!-- Meta Líquida -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Meta Líquida (Bolso)</span>
                                    <span class="font-medium text-gray-900">R$<span id="display-target">2000</span></span>
                                </div>
                                <input type="range" id="input-target" min="500" max="10000" step="100" value="2000" class="slider-blue w-full h-2 rounded-lg appearance-none cursor-pointer">
                            </div>

                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="text-xs text-gray-500 block mb-1">Custos Fixos (R$)</label>
                                    <input type="number" id="input-costs" value="300" class="w-full p-2 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-500 block mb-1">Impostos (%)</label>
                                    <input type="number" id="input-tax" value="25" class="w-full p-2 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <hr class="border-gray-100">

                        <!-- Bloco Variáveis -->
                        <div class="space-y-4">
                            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Variáveis de Trabalho</label>
                            
                            <!-- Preço Hora -->
                            <div class="bg-blue-50 p-3 rounded-lg border border-blue-100">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="font-bold text-blue-900">Preço por Hora</span>
                                    <span class="font-bold text-blue-700">R$<span id="display-rate">35</span></span>
                                </div>
                                <input type="range" id="input-rate" min="10" max="200" step="5" value="35" class="slider-blue w-full h-2 rounded-lg appearance-none cursor-pointer">
                                <p class="text-xs text-blue-600 mt-2">Arraste para ver como o seu dia muda.</p>
                            </div>

                            <!-- Produtividade -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Produtividade Real</span>
                                    <span id="badge-prod" class="text-xs px-2 py-0.5 rounded bg-green-100 text-green-600">70% Focada</span>
                                </div>
                                <input type="range" id="input-prod" min="20" max="100" step="5" value="70" class="slider-green w-full h-2 rounded-lg appearance-none cursor-pointer">
                            </div>

                            <!-- Dias por Semana -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Dias por Semana</span>
                                    <span class="font-medium"><span id="display-days">5</span> dias</span>
                                </div>
                                <input type="range" id="input-days" min="1" max="7" step="1" value="5" class="slider-purple w-full h-2 rounded-lg appearance-none cursor-pointer">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visualização Principal (Direita) -->
            <div class="lg:col-span-8 flex flex-col gap-6">
                
                <!-- Cartão de Resumo do Dia -->
                <div id="card-result" class="rounded-2xl shadow-sm border p-8 transition-colors bg-gray-100 border-gray-200">
                    <h2 class="text-xl font-bold text-gray-800 mb-2 flex items-center gap-2">
                        <i data-lucide="sun" class="text-orange-500"></i> A Sua Jornada Diária
                    </h2>
                    <p class="text-gray-600 mb-8">
                        Para ganhar <strong class="text-gray-900">R$<span id="text-target">2000</span> limpos</strong> cobrando <strong class="text-gray-900">R$<span id="text-rate">35</span>/h</strong>:
                    </p>

                    <!-- Área de Resultados -->
                    <div id="result-container" class="flex flex-col md:flex-row items-center justify-around gap-8">
                        
                        <!-- Círculo SVG Dinâmico -->
                        <div class="relative w-48 h-48 flex items-center justify-center">
                            <svg class="w-full h-full transform -rotate-90">
                                <!-- Círculo de Fundo -->
                                <circle cx="96" cy="96" r="88" stroke="currentColor" stroke-width="12" fill="transparent" class="text-white opacity-50"></circle>
                                <!-- Círculo de Progresso -->
                                <circle id="circle-progress" 
                                    cx="96" cy="96" r="88" 
                                    stroke="currentColor" stroke-width="12" fill="transparent" 
                                    stroke-dasharray="552.92" 
                                    stroke-dashoffset="0"
                                    class="text-emerald-500 transition-all duration-500 ease-out">
                                </circle>
                            </svg>
                            <div class="absolute flex flex-col items-center">
                                <span id="total-hours" class="text-4xl font-bold text-gray-800">0h 00m</span>
                                <span class="text-xs text-gray-500 uppercase font-bold tracking-wider mt-1">Total Necessário</span>
                            </div>
                        </div>

                        <!-- Legenda Detalhada -->
                        <div class="space-y-4 flex-1 w-full max-w-sm">
                            
                            <!-- Tempo Faturável -->
                            <div class="bg-white/60 p-4 rounded-xl border border-gray-200/50">
                                <div class="flex items-center gap-3 mb-1">
                                    <div class="p-2 bg-emerald-100 text-emerald-600 rounded-lg">
                                        <i data-lucide="briefcase" width="18"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-gray-800">Tempo Faturável</h4>
                                        <p class="text-xs text-gray-500">Mão na massa (Codar, Pintar, Digitar, Criar)</p>
                                    </div>
                                    <span id="billable-hours" class="text-lg font-bold text-emerald-600">0h 00m</span>
                                </div>
                            </div>

                            <!-- Tempo Suporte -->
                            <div class="bg-white/60 p-4 rounded-xl border border-gray-200/50">
                                <div class="flex items-center gap-3 mb-1">
                                    <div class="p-2 bg-orange-100 text-orange-600 rounded-lg">
                                        <i data-lucide="coffee" width="18"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-gray-800">Tempo de Suporte</h4>
                                        <p class="text-xs text-gray-500">Reuniões, Pausas, Cafezin, Toalet</p>
                                    </div>
                                    <span id="admin-hours" class="text-lg font-bold text-orange-600">0h 00m</span>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Estado Impossível (Escondido por padrão) -->
                    <div id="impossible-state" class="hidden text-center p-8 bg-red-100 rounded-xl text-red-800">
                        <i data-lucide="alert-triangle" width="48" class="mx-auto mb-2"></i>
                        <h3 class="font-bold text-xl">Matematicamente Impossível</h3>
                        <p>O dia só tem 24 horas. Precisa aumentar o preço ou reduzir a meta.</p>
                    </div>

                    <!-- Avisos -->
                    <div id="warning-msg" class="hidden mt-8 flex items-start gap-3 bg-red-100 p-4 rounded-lg text-red-800 text-sm">
                        <i data-lucide="alert-triangle" class="flex-shrink-0 mt-0.5" width="16"></i>
                        <p><strong>Cuidado:</strong> Esta jornada é insustentável a longo prazo. Considere aumentar o seu valor hora.</p>
                    </div>
                    
                    <div id="success-msg" class="hidden mt-8 flex items-start gap-3 bg-emerald-100 p-4 rounded-lg text-emerald-800 text-sm">
                        <i data-lucide="battery" class="flex-shrink-0 mt-0.5" width="16"></i>
                        <p><strong>Excelente:</strong> Esta jornada permite-lhe ter equilíbrio de vida ou escalar o negócio.</p>
                    </div>
                </div>

                <!-- Gráfico de Barra do Dia -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <i data-lucide="calendar" width="18" class="text-purple-600"></i> Visualização da Rotina (Janela de 12h)
                    </h3>
                    
                    <div class="relative pt-6 pb-2">
                        <!-- Barra Container -->
                        <div class="h-12 bg-gray-100 rounded-full flex overflow-hidden relative w-full">
                            <!-- Faturável -->
                            <div id="bar-billable" class="h-full bg-emerald-500 flex items-center justify-center text-white text-xs font-bold transition-all duration-500" style="width: 0%"></div>
                            <!-- Admin -->
                            <div id="bar-admin" class="h-full bg-orange-400 flex items-center justify-center text-white text-xs font-bold transition-all duration-500" style="width: 0%"></div>
                            <!-- Livre -->
                            <div class="flex-1 bg-gray-200 flex items-center justify-center text-gray-400 text-xs font-bold">Livre</div>
                        </div>
                        
                        <div class="flex justify-between text-xs text-gray-400 mt-2 font-mono">
                            <span>09:00</span>
                            <span>12:00</span>
                            <span>15:00</span>
                            <span>18:00</span>
                            <span>21:00</span>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-4 text-center">
                        *As cores representam a proporção do tempo total necessário para bater a meta.
                    </p>
                </div>
            </div>
        </div>

    </div>

    <script>
        lucide.createIcons();

        let activeTab = 'product';

        function switchTab(tab) {
            activeTab = tab;
            
            // Buttons
            const tabProd = document.getElementById('tabProduct');
            const tabServ = document.getElementById('tabService');
            const tabHour = document.getElementById('tabHourly');
            const tabWork = document.getElementById('tabWorkload');
            
            // Containers
            const pricingTool = document.getElementById('pricingTool');
            const hourlyTool = document.getElementById('hourlyTool');
            const workloadTool = document.getElementById('workloadTool');
            
            // Classes
            const inactiveClass = "flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all text-slate-600 hover:bg-slate-50";
            const activeClassBlue = "flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all bg-blue-600 text-white shadow-md";
            const activeClassPurple = "flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all bg-purple-600 text-white shadow-md";
            const activeClassEmerald = "flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all bg-emerald-600 text-white shadow-md";
            const activeClassWorkload = "flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-all bg-slate-800 text-white shadow-md"; // New style for new tab

            // Reset States
            tabProd.className = inactiveClass;
            tabServ.className = inactiveClass;
            tabHour.className = inactiveClass;
            tabWork.className = inactiveClass;
            
            // Hide All
            pricingTool.classList.add('hidden');
            hourlyTool.classList.add('hidden');
            workloadTool.classList.add('hidden');

            if (tab === 'hourly') {
                tabHour.className = activeClassEmerald;
                hourlyTool.classList.remove('hidden');
                calculateHourly(); 
            } else if (tab === 'workload') {
                tabWork.className = activeClassWorkload;
                workloadTool.classList.remove('hidden');
                calculateWorkload();
            } else {
                pricingTool.classList.remove('hidden');

                if (tab === 'product') {
                    tabProd.className = activeClassBlue;
                    document.getElementById('productInputs').classList.remove('hidden');
                    document.getElementById('serviceInputs').classList.add('hidden');
                    document.getElementById('inputTitle').textContent = "Custos do Produto";
                } else {
                    tabServ.className = activeClassPurple;
                    document.getElementById('serviceInputs').classList.remove('hidden');
                    document.getElementById('productInputs').classList.add('hidden');
                    document.getElementById('inputTitle').textContent = "Custos do Serviço";
                }
                calculatePricing();
            }
        }

        // --- LÓGICA PRECIFICAÇÃO (PRODUTOS/SERVIÇOS) ---
        function calculatePricing() {
            let totalCost = 0;
            let taxPct = 0;
            let profitPct = 0;
            let labelCostText = "Custos";
            let costColor = "bg-red-500";

            if (activeTab === 'product') {
                const cost = parseFloat(document.getElementById('prodCost').value) || 0;
                const expenses = parseFloat(document.getElementById('prodExpenses').value) || 0;
                taxPct = parseFloat(document.getElementById('prodTax').value) || 0;
                profitPct = parseFloat(document.getElementById('prodProfit').value) || 0;
                totalCost = cost + expenses;
                labelCostText = "Custos";
                costColor = "bg-red-500";
            } else if (activeTab === 'service') {
                const rate = parseFloat(document.getElementById('servRate').value) || 0;
                const hours = parseFloat(document.getElementById('servHours').value) || 0;
                const materials = parseFloat(document.getElementById('servMaterials').value) || 0;
                taxPct = parseFloat(document.getElementById('servTax').value) || 0;
                profitPct = parseFloat(document.getElementById('servProfit').value) || 0;
                totalCost = (rate * hours) + materials;
                labelCostText = "Mão de Obra + Custos";
                costColor = "bg-blue-500";
            }

            const percentageDeductions = taxPct + profitPct;
            
            if (percentageDeductions >= 100) {
                document.getElementById('errorState').classList.remove('hidden');
                document.getElementById('successState').classList.add('hidden');
                return;
            } else {
                document.getElementById('errorState').classList.add('hidden');
                document.getElementById('successState').classList.remove('hidden');
            }

            const divisor = (100 - percentageDeductions) / 100;
            const finalPrice = totalCost / divisor;
            const taxAmount = finalPrice * (taxPct / 100);
            const profitAmount = finalPrice * (profitPct / 100);

            const fmt = (n) => n.toLocaleString('pt-PT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

            document.getElementById('finalPriceDisplay').textContent = fmt(finalPrice);
            document.getElementById('profitReal').textContent = 'R$ ' + fmt(profitAmount);
            document.getElementById('costTotal').textContent = 'R$ ' + fmt(totalCost);

            document.getElementById('labelCost').textContent = labelCostText;
            document.getElementById('valCost').textContent = 'R$ ' + fmt(totalCost);
            document.getElementById('barCost').style.width = ((totalCost / finalPrice) * 100) + '%';
            document.getElementById('barCost').className = `h-2 rounded-full transition-all duration-500 ${costColor}`;

            document.getElementById('valTax').textContent = 'R$ ' + fmt(taxAmount);
            document.getElementById('barTax').style.width = ((taxAmount / finalPrice) * 100) + '%';

            document.getElementById('valProfit').textContent = 'R$ ' + fmt(profitAmount);
            document.getElementById('barProfit').style.width = ((profitAmount / finalPrice) * 100) + '%';
        }

        // --- LÓGICA VALOR HORA (HORAS ADAPTADAS) ---
        const hourlyInputs = {
            desiredSalary: document.getElementById('desiredSalary'),
            fixedCosts: document.getElementById('fixedCosts'),
            taxesAndBuffer: document.getElementById('taxesAndBuffer'),
            workDaysPerWeek: document.getElementById('workDaysPerWeek'),
            hoursPerDay: document.getElementById('hoursPerDay'),
            vacationWeeks: document.getElementById('vacationWeeks'),
            productivity: document.getElementById('productivity')
        };

        function calculateHourly() {
            const salary = parseFloat(hourlyInputs.desiredSalary.value) || 0;
            const costs = parseFloat(hourlyInputs.fixedCosts.value) || 0;
            const taxPct = parseFloat(hourlyInputs.taxesAndBuffer.value) || 0;
            const daysPerWeek = parseFloat(hourlyInputs.workDaysPerWeek.value);
            const hoursPerDay = parseFloat(hourlyInputs.hoursPerDay.value);
            const vacation = parseFloat(hourlyInputs.vacationWeeks.value);
            const prod = parseFloat(hourlyInputs.productivity.value);

            document.getElementById('displayVacation').textContent = vacation;
            const badgeProd = document.getElementById('badgeProductivity');
            badgeProd.textContent = prod + '% Faturável';
            badgeProd.className = `text-xs px-2 py-0.5 rounded ${prod > 80 ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}`;

            const weeksInYear = 52;
            const workingWeeks = weeksInYear - vacation;
            const totalDaysYear = workingWeeks * daysPerWeek;
            const totalHoursYear = totalDaysYear * hoursPerDay;
            
            const billableHoursYear = totalHoursYear * (prod / 100);
            const billableHoursMonth = billableHoursYear / 12;

            const totalNeedsNet = salary + costs;
            const taxRate = taxPct / 100;
            const safeTaxRate = taxRate >= 1 ? 0.99 : taxRate;
            
            const requiredGrossRevenue = totalNeedsNet / (1 - safeTaxRate);
            const minHourlyRate = billableHoursMonth > 0 ? requiredGrossRevenue / billableHoursMonth : 0;
            
            document.getElementById('resultHourlyRate').textContent = Math.floor(minHourlyRate).toLocaleString('pt-PT');
            document.getElementById('resultHourlyDecimal').textContent = ',' + (minHourlyRate % 1).toFixed(2).substring(2);
            document.getElementById('resultGrossRevenue').textContent = Math.round(requiredGrossRevenue).toLocaleString('pt-PT');
            document.getElementById('resultBillableHours').textContent = Math.round(billableHoursMonth);

            const pSalary = requiredGrossRevenue > 0 ? (salary / requiredGrossRevenue) * 100 : 0;
            const pCosts = requiredGrossRevenue > 0 ? (costs / requiredGrossRevenue) * 100 : 0;
            const pTax = requiredGrossRevenue > 0 ? ((requiredGrossRevenue - totalNeedsNet) / requiredGrossRevenue) * 100 : 0;

            document.getElementById('percentSalary').textContent = Math.round(pSalary) + '%';
            document.getElementById('barSalary').style.width = pSalary + '%';

            document.getElementById('percentCosts').textContent = Math.round(pCosts) + '%';
            document.getElementById('barCosts').style.width = pCosts + '%';

            document.getElementById('percentTax').textContent = Math.round(pTax) + '%';
            document.getElementById('barTax').style.width = pTax + '%';

            document.getElementById('suggestedRate').textContent = `R$${Math.round(minHourlyRate * 1.3)} - R$${Math.round(minHourlyRate * 1.5)}`;
        }

        // --- LÓGICA METAS E REALIDADE (WORKLOAD) ---
        const workloadInputs = {
            target: document.getElementById('input-target'),
            costs: document.getElementById('input-costs'),
            tax: document.getElementById('input-tax'),
            rate: document.getElementById('input-rate'),
            prod: document.getElementById('input-prod'),
            days: document.getElementById('input-days'),
        };

        const workloadDisplays = {
            target: document.getElementById('display-target'),
            textTarget: document.getElementById('text-target'),
            rate: document.getElementById('display-rate'),
            textRate: document.getElementById('text-rate'),
            days: document.getElementById('display-days'),
            badgeProd: document.getElementById('badge-prod'),
            
            totalHours: document.getElementById('total-hours'),
            billableHours: document.getElementById('billable-hours'),
            adminHours: document.getElementById('admin-hours'),
            
            circleProgress: document.getElementById('circle-progress'),
            cardResult: document.getElementById('card-result'),
            resultContainer: document.getElementById('result-container'),
            impossibleState: document.getElementById('impossible-state'),
            
            warningMsg: document.getElementById('warning-msg'),
            successMsg: document.getElementById('success-msg'),

            barBillable: document.getElementById('bar-billable'),
            barAdmin: document.getElementById('bar-admin'),
        };

        function formatHours(decimalHours) {
            if (isNaN(decimalHours)) return "0h 00m";
            const hours = Math.floor(decimalHours);
            const minutes = Math.round((decimalHours - hours) * 60);
            return `${hours}h ${minutes < 10 ? '0' : ''}${minutes}m`;
        }

        function calculateWorkload() {
            const targetNet = parseFloat(workloadInputs.target.value);
            const fixedCosts = parseFloat(workloadInputs.costs.value) || 0;
            const taxRate = parseFloat(workloadInputs.tax.value) || 0;
            const hourlyRate = parseFloat(workloadInputs.rate.value) || 1;
            const productivity = parseFloat(workloadInputs.prod.value);
            const daysPerWeek = parseFloat(workloadInputs.days.value);

            workloadDisplays.target.textContent = targetNet;
            workloadDisplays.textTarget.textContent = targetNet;
            workloadDisplays.rate.textContent = hourlyRate;
            workloadDisplays.textRate.textContent = hourlyRate;
            workloadDisplays.days.textContent = daysPerWeek;
            
            workloadDisplays.badgeProd.textContent = `${productivity}% Focada`;
            workloadDisplays.badgeProd.className = `text-xs px-2 py-0.5 rounded ${productivity < 60 ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}`;

            const totalNeedsNet = targetNet + fixedCosts;
            const taxMultiplier = 1 - (taxRate / 100);
            const grossRevenueNeeded = totalNeedsNet / (taxMultiplier > 0 ? taxMultiplier : 1);
            
            const totalBillableHoursMonth = grossRevenueNeeded / hourlyRate;
            const daysInMonth = daysPerWeek * 4.33;
            const dailyBillableHours = totalBillableHoursMonth / daysInMonth;
            
            const productivityFactor = productivity / 100;
            const totalWorkDayHours = dailyBillableHours / (productivityFactor > 0 ? productivityFactor : 1);
            const adminTime = totalWorkDayHours - dailyBillableHours;

            workloadDisplays.totalHours.textContent = formatHours(totalWorkDayHours);
            workloadDisplays.billableHours.textContent = formatHours(dailyBillableHours);
            workloadDisplays.adminHours.textContent = formatHours(adminTime);

            const isImpossible = totalWorkDayHours > 24;
            
            if (isImpossible) {
                workloadDisplays.resultContainer.classList.add('hidden');
                workloadDisplays.impossibleState.classList.remove('hidden');
                workloadDisplays.cardResult.className = "rounded-2xl shadow-sm border p-8 transition-colors bg-red-50 border-red-200";
                workloadDisplays.warningMsg.classList.add('hidden');
                workloadDisplays.successMsg.classList.add('hidden');
            } else {
                workloadDisplays.resultContainer.classList.remove('hidden');
                workloadDisplays.impossibleState.classList.add('hidden');

                let colorClass = "";
                let circleColor = "";
                if (totalWorkDayHours <= 6) {
                    colorClass = "bg-emerald-50 border-emerald-200";
                    circleColor = "text-emerald-500";
                    workloadDisplays.successMsg.classList.remove('hidden');
                    workloadDisplays.warningMsg.classList.add('hidden');
                } else if (totalWorkDayHours <= 9) {
                    colorClass = "bg-blue-50 border-blue-200";
                    circleColor = "text-yellow-500";
                    workloadDisplays.successMsg.classList.add('hidden');
                    workloadDisplays.warningMsg.classList.add('hidden');
                } else if (totalWorkDayHours <= 12) {
                    colorClass = "bg-yellow-50 border-yellow-200";
                    circleColor = "text-yellow-500";
                    workloadDisplays.successMsg.classList.add('hidden');
                    workloadDisplays.warningMsg.classList.remove('hidden');
                } else {
                    colorClass = "bg-red-50 border-red-200";
                    circleColor = "text-red-500";
                    workloadDisplays.successMsg.classList.add('hidden');
                    workloadDisplays.warningMsg.classList.remove('hidden');
                }
                
                workloadDisplays.cardResult.className = `rounded-2xl shadow-sm border p-8 transition-colors ${colorClass}`;
                workloadDisplays.circleProgress.setAttribute('class', `transition-all duration-500 ease-out ${circleColor}`);

                const circumference = 552.92;
                const offset = circumference * (1 - Math.min(totalWorkDayHours, 24) / 24);
                workloadDisplays.circleProgress.style.strokeDashoffset = offset;
                
                const percentBillable = Math.min((dailyBillableHours / 12) * 100, 100);
                const percentAdmin = Math.min((adminTime / 12) * 100, 100 - percentBillable);
                
                workloadDisplays.barBillable.style.width = `${percentBillable}%`;
                workloadDisplays.barBillable.textContent = percentBillable > 10 ? 'Faturável' : '';
                
                workloadDisplays.barAdmin.style.width = `${percentAdmin}%`;
                workloadDisplays.barAdmin.textContent = percentAdmin > 10 ? 'Admin' : '';
            }
        }


        // Listeners
        // Pricing Inputs
        const pricingInputs = document.querySelectorAll('#pricingTool input');
        pricingInputs.forEach(input => input.addEventListener('input', calculatePricing));

        // Hourly Inputs
        Object.values(hourlyInputs).forEach(input => input.addEventListener('input', calculateHourly));

        // Workload Inputs
        Object.values(workloadInputs).forEach(input => input.addEventListener('input', calculateWorkload));

        // Init
        calculatePricing();
        calculateHourly();
        calculateWorkload();
    </script>
</body>
</html>